{
  "pipeline": {
    "name": "getfiles"
  },
  "description": "A pipeline that gets a file out of GCS",
  "transform": {
    "cmd": [ "/bin/bash" ],
    "stdin": [
      "echo $GCS_ACCESS > /app/rawcreds.txt",
      "base64 --decode /app/rawcreds.txt > /app/creds.json",
      "export GOOGLE_APPLICATION_CREDENTIALS=/app/creds.json",
      "python /app/gcs.py"
    ],
    "image": "achippa2112/mgmt590-gcs:249e17f674a2896b75d159c8c4d74bb0d450879b",
    "secrets": [ {
        "name": "gcsaccess",
        "env_var": "GCS_ACCESS",
        "key": "creds"
    } ]
  },
  "input": {
	"union": [
	{
    "cron": {
      "name": "tick",
      "spec": "@every 100s"
    }
	},
	{
	"pfs": {
	  "repo": "images",
	  "glob": "/*"	
	}
	}]
  }
}
